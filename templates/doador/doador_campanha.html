{% extends "doador/doador__base.html" %}
{% block custom_css %}
<link href="/static/css/doador/doador_campanha.css" rel="stylesheet">
{% endblock %}

{% block conteudo %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="floating-elements">
        <i class="fas fa-bullhorn floating-element" style="font-size: 3rem;"></i>
        <i class="fas fa-heart floating-element" style="font-size: 2.5rem;"></i>
        <i class="fas fa-users floating-element" style="font-size: 3.5rem;"></i>
    </div>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Campanhas de Doação</h1>
            <p class="hero-subtitle">Participe das nossas campanhas e ajude a salvar vidas. Cada doação faz a diferença!</p>
        </div>
    </div>
</section>
<!-- Campanha em Destaque -->
<section class="container">
    <div class="featured-campaign fade-in">
        <div class="featured-content">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="featured-title">Junho Vermelho 2025</h2>
                    <p class="featured-subtitle">Mês Nacional do Doador de Sangue - Participe da maior campanha de doação do ano!</p>
                </div>
                <div class="col-md-4 text-center">
                    <a href="/doador/campanha/detalhes/1" class="btn btn-light btn-lg px-4 py-3" style="border-radius: 25px; font-weight: 600;">
                        <i class="fas fa-heart me-2"></i>
                        Participar Agora
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Filtros e Busca -->
<section class="container">
    <div class="campaign-filter fade-in">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input
                        type="text"
                        class="search-input"
                        placeholder="Buscar campanhas..."
                        id="searchInput"
                    >
                </div>
            </div>
            <div class="col-md-6">
                <div class="text-center">
                    <button class="filter-btn active" data-filter="all">Todas</button>
                    <button class="filter-btn" data-filter="active">Ativas</button>
                    <button class="filter-btn" data-filter="upcoming">Próximas</button>
                    <button class="filter-btn" data-filter="ended">Encerradas</button>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Lista de Campanhas -->
<section class="container mb-5">
    <div class="text-center mb-5">
        <h2 class="section-title">Todas as Campanhas</h2>
    </div>
    <div class="row" id="campaignsList">
        <!-- Campanha 1 -->
        {% if campanhas %}
            {% for campanha in campanhas %}
        {% set hoje = now().date() %}
        {% set status_campanha = 'upcoming' if campanha.data_inicio > hoje else ('active' if campanha.data_fim >= hoje else 'ended') %}
        {% set status_texto = 'Próxima' if status_campanha == 'upcoming' else ('Ativa' if status_campanha == 'active' else 'Encerrada') %}
        {% set status_class = 'status-upcoming' if status_campanha == 'upcoming' else ('status-active' if status_campanha == 'active' else 'status-ended') %}
        <div class="col-md-6 col-lg-4 campaign-item fade-in mb-5" data-category="{{ status_campanha }}" data-title="{{ campanha.titulo|lower }}">
            <div class="campaign-card">
                <div class="position-relative">
                    <img src="{{campanha.foto}}" class="card-img-top campaign-image" alt="{{campanha.titulo}}">
                    <div class="campaign-status {{ status_class }}">
                        {{ status_texto }}
                    </div>
                </div>
                <div class="campaign-body">
                    <h5 class="campaign-title">{{campanha.titulo}}</h5>
                    <div class="campaign-meta">
                        <i class="fas fa-calendar"></i>
                        <span>
                            {% if campanha.data_inicio and campanha.data_fim %}
                                {{ campanha.data_inicio.strftime('%d/%m/%Y') }} - {{ campanha.data_fim.strftime('%d/%m/%Y') }}
                            {% elif campanha.data_inicio %}
                                Início: {{ campanha.data_inicio.strftime('%d/%m/%Y') }}
                            {% endif %}
                        </span>
                    </div>
                    <p>{{ campanha.descricao[:180] }}{% if campanha.descricao|length > 180 %}...{% endif %}</p>
                    <a href="/doador/campanha/detalhes/{{ campanha.cod_campanha }}" class="btn-campaign">Saiba Mais</a>
                </div>
            </div>
        </div>
        {% endfor %}
    {% endif %}        
    </div>
</section>
{% endblock %}

<!-- Custom JavaScript -->
{% block custom_js %}
<script src="/static/js/doador/doador_campanha.js">  
</script>
{% endblock %}