{% extends "boas_vindas_#base.html" %}
{% block custom_css %}
<link href="/static/css/boas_vindas.css" rel="stylesheet">
{% endblock %}


{% block corpo_inicio %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Bem-vindo ao Sistema Hemotec</h1>
            <p class="hero-subtitle">Transformando doações em esperança, conectando vidas através do sangue</p>
            <a href="/login">
                <button class="btn btn-primary btn-login">Fazer Login</button>
            </a>
        </div>
    </div>
</section>

<!-- Campanhas Section -->
<section class="container">
    <div class="text-center mb-5">
        <h2 class="section-title">Campanhas Recentes</h2>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <img src="https://images.unsplash.com/photo-1615461066841-6116e61058f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" class="card-img-top" alt="Campanha de Doação">
                <div class="card-body">
                    <h5 class="card-title">Junho Vermelho</h5>
                    <p class="card-text">Participe da nossa campanha de conscientização sobre a importância da doação de sangue. Cada doação pode salvar até 4 vidas!</p>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Publicado em 01/06/2025</small>
                    <a href="#" class="btn btn-outline-danger float-end">Saiba mais</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <img src="https://images.unsplash.com/photo-1579154204601-01588f351e67?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" class="card-img-top" alt="Doação Coletiva">
                <div class="card-body">
                    <h5 class="card-title">Doação Coletiva Empresarial</h5>
                    <p class="card-text">Empresas parceiras estão organizando doações coletivas. Veja como sua empresa pode participar desta iniciativa solidária.</p>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Publicado em 15/05/2025</small>
                    <a href="#" class="btn btn-outline-danger float-end">Saiba mais</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <img src="https://images.unsplash.com/photo-1584036561566-baf8f5f1b144?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1632&q=80" class="card-img-top" alt="Aplicativo Hemotec">
                <div class="card-body">
                    <h5 class="card-title">Novo Aplicativo Hemotec</h5>
                    <p class="card-text">Lançamos nosso aplicativo para facilitar o agendamento de doações e acompanhamento do histórico de doações. Baixe agora!</p>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Publicado em 10/05/2025</small>
                    <a href="#" class="btn btn-outline-danger float-end">Saiba mais</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quote Section -->
<section class="quote-section">
    <div class="container text-center">
        <p class="quote-text">Doar sangue não é só um ato de solidariedade, é um compromisso com a vida. Cada gota doada é uma chance de recomeço para alguém.</p>
        <p class="quote-author">— Campanha Nacional de Doação de Sangue</p>
    </div>
</section>

<!-- Stats Section -->
<section class="container">
    <div class="text-center mb-5">
        <h2 class="section-title">Nosso Impacto</h2>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div class="stats-item">
                <div class="stats-icon">
                    <i class="fas fa-user-friends"></i>
                </div>
                <div class="stats-number">15.000+</div>
                <div class="stats-text">Doadores Cadastrados</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-item">
                <div class="stats-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <div class="stats-number">8.500+</div>
                <div class="stats-text">Doações Realizadas</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-item">
                <div class="stats-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="stats-number">34.000+</div>
                <div class="stats-text">Vidas Impactadas</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-item">
                <div class="stats-icon">
                    <i class="fas fa-hospital"></i>
                </div>
                <div class="stats-number">25+</div>
                <div class="stats-text">Hemocentros Parceiros</div>
            </div>
        </div>
    </div>
</section>

<!-- Informações Importantes Section -->
<section class="container my-5">
    <div class="row">
        <div class="col-lg-12 mb-4">
            <!-- Informações Importantes now takes full width -->
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h3 class="card-title text-danger mb-3">
                        <i class="fas fa-info-circle me-2"></i>
                        Informações Importantes
                    </h3>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-clock text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Horário de Funcionamento</h6>
                                    <p class="text-muted mb-0">
                                        Segunda a Sexta: 7h às 18h
                                        <br>
                                        Sábados: 7h às 12h
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-user-check text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Requisitos Básicos</h6>
                                    <p class="text-muted mb-0">
                                        Idade: 16 a 69 anos
                                        <br>
                                        Peso mínimo: 50kg
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-calendar-alt text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Intervalo entre Doações</h6>
                                    <p class="text-muted mb-0">
                                        Homens: 60 dias
                                        <br>
                                        Mulheres: 90 dias
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-id-card text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Documentos Necessários</h6>
                                    <p class="text-muted mb-0">
                                        RG, CPF ou CNH
                                        <br>
                                        Em boas condições
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Estoque Atual Section (now below and expanded) -->
    <div class="row">
        <div class="col-lg-12 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4 d-flex flex-column">
                    <h4 class="card-title text-danger mb-3">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Estoque Atual
                    </h4>
                    <div class="row">
                        <div class="col-md-6">
                            <!-- O+ -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">O+</span>
                                    <span class="badge bg-danger">Crítico</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-danger"
                                        role="progressbar"
                                        style="width: 20%;"
                                        aria-valuenow="20"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- A+ -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">A+</span>
                                    <span class="badge bg-warning">Baixo</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-warning"
                                        role="progressbar"
                                        style="width: 35%;"
                                        aria-valuenow="35"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- B+ -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">B+</span>
                                    <span class="badge bg-success">Adequado</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-success"
                                        role="progressbar"
                                        style="width: 70%;"
                                        aria-valuenow="70"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- AB+ -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">AB+</span>
                                    <span class="badge bg-warning">Baixo</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-warning"
                                        role="progressbar"
                                        style="width: 30%;"
                                        aria-valuenow="30"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- O- -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">O-</span>
                                    <span class="badge bg-warning">Moderado</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-warning"
                                        role="progressbar"
                                        style="width: 45%;"
                                        aria-valuenow="45"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- A- -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">A-</span>
                                    <span class="badge bg-success">Adequado</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-success"
                                        role="progressbar"
                                        style="width: 65%;"
                                        aria-valuenow="65"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- B- -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">B-</span>
                                    <span class="badge bg-danger">Crítico</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-danger"
                                        role="progressbar"
                                        style="width: 25%;"
                                        aria-valuenow="25"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                            <!-- AB- -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fw-bold">AB-</span>
                                    <span class="badge bg-success">Adequado</span>
                                </div>
                                <div class="progress mb-2" style="height: 8px;">
                                    <div
                                        class="progress-bar bg-success"
                                        role="progressbar"
                                        style="width: 80%;"
                                        aria-valuenow="80"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                    ></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-auto">
                        <div class="alert alert-danger mb-0" role="alert">
                            <small>
                                <i class="fas fa-heart me-1"></i>
                                Sua doação pode salvar vidas! Tipos O+, A+ e B- são urgentes.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End of row for Estoque Atual -->
</section>

<!-- Mapa -->
<section class="container mb-5">
  <div class="text-center mb-5">
    <h2 class="section-title">Unidades de Coleta</h2>
  </div>
  <div class="map-container fade-in">
    <div id="mapa" style="height: 500px; width: 100%; border-radius: 8px;"></div>
  </div>
</section>

<!-- Leaflet.js -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
{% endblock %}

<!-- Custmom JavaScript do Map -->
{% block custom_js %}
<script>
  const mapa = L.map('mapa').setView([-20.839, -41.112], 12);

  // Camada de fundo do OpenStreetMap
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(mapa);

  // Ícone personalizado da gota (imagem local)
  const iconeGota = L.icon({
    iconUrl: 'img/gota.png', // Caminho local
    iconSize: [40, 40],
    iconAnchor: [20, 40],
    popupAnchor: [0, -35]
  });

  // Ícone azul para o usuário
  const iconeUsuario = L.icon({
    iconUrl: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
    iconSize: [32, 32],
    iconAnchor: [16, 32]
  });

  // Carregar unidades do arquivo JSON
  /*fetch('/templates/unidades.json')
    .then(res => res.json())
    .then(unidades => {
      unidades.forEach(u => {
        L.marker([u.lat, u.lon], { icon: iconeGota }).addTo(mapa)
          .bindPopup(`<strong>${u.nome}</strong><br>${u.cidade}<br><em>${u.horario}</em>`);
      });
    })
    .catch(err => {
      alert("Erro ao carregar as unidades.");
      console.error(err);
    });*/

  // Localização do usuário (opcional)
  mapa.locate({ setView: true, maxZoom: 14 });
  mapa.on('locationfound', function(e) {
    L.marker(e.latlng, { icon: iconeUsuario }).addTo(mapa)
      .bindPopup("Você está aqui");
  });

  mapa.on('locationerror', function() {
    alert("Não conseguimos acessar sua localização.");
  });
</script>
{% endblock %}