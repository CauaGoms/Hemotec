<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hemotec - Cadastro</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <!-- Custom CSS -->
        <link href="/static/css/publico/publico_cadastrar_doador.css" rel="stylesheet">
        <!-- Icone na aba do navegador -->
        <link rel="icon" href="/static/img/logo_vermelha.svg">
    </head>
    <body>
        <a href="/login" class="back-arrow">
            <i class="fas fa-arrow-left"></i>
        </a>
        <div class="register-container">
            <a href="/">
                <img src="/static/img/logo_vermelha.svg" alt="Hemotec Logo" class="logo-register">
            </a>
            <h2 class="register-title">Cadastre-se</h2>
            <!-- Exemplo de estrutura para cadastro multi-etapas -->
            <form method="post" action="/cadastrar">
                <!-- Seção 1: Dados Pessoais -->
                <div class="form-section" id="cadastroSection1">
                    <h3>Dados Pessoais</h3>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('nome') %}is-invalid{% elif erro and 'nome' in erro.lower() %}is-invalid{% endif %}"
                            id="name"
                            placeholder="Nome Completo"
                            required
                            name="nome"
                            value="{{ dados.nome if dados else '' }}"
                        >
                        {% if erros and erros.get('nome') %}
                        <div class="invalid-feedback">{{ erros.get('nome') }}</div>
                        {% elif erro and 'nome' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('cpf') %}is-invalid{% elif erro and 'cpf' in erro.lower() %}is-invalid{% endif %}"
                            id="cpf"
                            placeholder="CPF"
                            required
                            name="cpf"
                            value="{{ dados.cpf if dados else '' }}"
                        >
                        {% if erros and erros.get('cpf') %}
                        <div class="invalid-feedback">{{ erros.get('cpf') }}</div>
                        {% elif erro and 'cpf' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="date"
                            class="form-control {% if erros and erros.get('data_nascimento') %}is-invalid{% elif erro and 'data_nascimento' in erro.lower() %}is-invalid{% endif %}"
                            id="birthdate"
                            placeholder="Data de Nascimento"
                            required
                            value="{{ dados.data_nascimento if dados else '' }}"
                            name="data_nascimento"
                        >
                        {% if erros and erros.get('data_nascimento') %}
                        <div class="invalid-feedback">{{ erros.get('data_nascimento') }}</div>
                        {% elif erro and 'data_nascimento' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="email"
                            class="form-control {% if erros and erros.get('email') %}is-invalid{% elif erro and 'email' in erro.lower() %}is-invalid{% endif %}"
                            id="email"
                            placeholder="Email"
                            required
                            name="email"
                            value="{{ dados.email if dados else '' }}"
                        >
                        {% if erros and erros.get('email') %}
                        <div class="invalid-feedback">{{ erros.get('email') }}</div>
                        {% elif erro and 'email' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="tel"
                            inputmode="numeric"
                            pattern="\d{10,11}"
                            maxlength="15"
                            class="form-control {% if erros and erros.get('telefone') %}is-invalid{% elif erro and 'telefone' in erro.lower() %}is-invalid{% endif %}"
                            id="telefone"
                            placeholder="Telefone"
                            required
                            value="{{ dados.telefone if dados else '' }}"
                            name="telefone"
                        >
                        {% if erros and erros.get('telefone') %}
                        <div class="invalid-feedback">{{ erros.get('telefone') }}</div>
                        {% elif erro and 'telefone' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <select
                            class="form-control {% if erros and erros.get('genero') %}is-invalid{% elif erro and 'gênero' in erro.lower() or erro and 'genero' in erro.lower() %}is-invalid{% endif %}"
                            id="genero"
                            required
                            name="genero"
                        >
                            <option value="" disabled {% if not dados or not dados.genero %}selected{% endif %}>Selecione o gênero</option>
                            <option value="Masculino" {% if dados and dados.genero == 'Masculino' %}selected{% endif %}>Masculino</option>
                            <option value="Feminino" {% if dados and dados.genero == 'Feminino' %}selected{% endif %}>Feminino</option>
                            <option value="Outros" {% if dados and dados.genero == 'Outros' %}selected{% endif %}>Outros</option>
                        </select>
                        {% if erros and erros.get('genero') %}
                        <div class="invalid-feedback">{{ erros.get('genero') }}</div>
                        {% elif erro and ('gênero' in erro.lower() or 'genero' in erro.lower()) %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                </div>
                <!-- Seção 2: Endereço -->
                <div class="form-section" id="cadastroSection2" style="display: none;">
                    <h3>Endereço</h3>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('cep_usuario') %}is-invalid{% elif erro and 'cep' in erro.lower() %}is-invalid{% endif %}"
                            id="cep"
                            placeholder="CEP"
                            maxlength="9"
                            required
                            name="cep_usuario"
                            value="{{ dados.cep_usuario if dados else '' }}"
                        >
                        {% if erros and erros.get('cep_usuario') %}
                        <div class="invalid-feedback">{{ erros.get('cep_usuario') }}</div>
                        {% elif erro and 'cep' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('rua_usuario') %}is-invalid{% elif erro and 'rua' in erro.lower() %}is-invalid{% endif %}"
                            id="rua"
                            placeholder="Rua"
                            required
                            name="rua_usuario"
                            value="{{ dados.rua_usuario if dados else '' }}"
                        >
                        {% if erros and erros.get('rua_usuario') %}
                        <div class="invalid-feedback">{{ erros.get('rua_usuario') }}</div>
                        {% elif erro and 'rua' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('bairro_usuario') %}is-invalid{% elif erro and 'bairro' in erro.lower() %}is-invalid{% endif %}"
                            id="bairro"
                            placeholder="Bairro"
                            required
                            name="bairro_usuario"
                            value="{{ dados.bairro_usuario if dados else '' }}"
                        >
                        {% if erros and erros.get('bairro_usuario') %}
                        <div class="invalid-feedback">{{ erros.get('bairro_usuario') }}</div>
                        {% elif erro and 'bairro' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('cidade_usuario') %}is-invalid{% elif erro and 'cidade' in erro.lower() %}is-invalid{% endif %}"
                            id="cidade"
                            placeholder="Cidade"
                            required
                            name="cidade_usuario"
                            value="{{ dados.cidade_usuario if dados else '' }}"
                        >
                        {% if erros and erros.get('cidade_usuario') %}
                        <div class="invalid-feedback">{{ erros.get('cidade_usuario') }}</div>
                        {% elif erro and 'cidade' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <input
                            type="text"
                            class="form-control {% if erros and erros.get('estado_usuario') %}is-invalid{% elif erro and 'uf' in erro.lower() %}is-invalid{% endif %}"
                            id="uf"
                            placeholder="UF"
                            required
                            name="estado_usuario"
                            maxlength="2"
                            value="{{ dados.estado_usuario if dados else '' }}"
                        >
                        {% if erros and erros.get('estado_usuario') %}
                        <div class="invalid-feedback">{{ erros.get('estado_usuario') }}</div>
                        {% elif erro and 'uf' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                </div>
                <!-- Seção 3: Senha -->
                <div class="form-section" id="cadastroSection3" style="display: none;">
                    <h3>Senha de Acesso</h3>
                    <div class="mb-3">
                        <div class="input-group">
                            <input
                                type="password"
                                class="form-control {% if erros and erros.get('senha') %}is-invalid{% elif erro and 'senha' in erro.lower() %}is-invalid{% endif %}"
                                id="password"
                                placeholder="Crie uma senha"
                                required
                                name="senha"
                            >
                            <button
                                type="button"
                                class="btn btn-outline-secondary btn-toggle-password"
                                data-target="password"
                                aria-label="Mostrar senha"
                            >
                                <i class="fa fa-eye"></i>
                            </button>
                        </div>
                        {% if erros and erros.get('senha') %}
                        <div class="invalid-feedback">{{ erros.get('senha') }}</div>
                        {% elif erro and 'senha' in erro.lower() and 'confirmar' not in erro.lower() and 'não coincidem' not in erro.lower() and 'nao coincidem' not in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <div class="input-group">
                            <input
                                type="password"
                                class="form-control {% if erros and erros.get('confirmar_senha') %}is-invalid{% elif erro and 'confirmar' in erro.lower() %}is-invalid{% endif %}"
                                id="confirm-password"
                                name="confirmar_senha"
                                placeholder="Confirme sua senha"
                                required
                            >
                            <button
                                type="button"
                                class="btn btn-outline-secondary btn-toggle-password"
                                data-target="confirm-password"
                                aria-label="Mostrar senha"
                            >
                                <i class="fa fa-eye"></i>
                            </button>
                        </div>
                        {% if erros and erros.get('confirmar_senha') %}
                        <div class="invalid-feedback">{{ erros.get('confirmar_senha') }}</div>
                        {% elif erro and 'confirmar' in erro.lower() %}
                        <div class="invalid-feedback">{{ erro }}</div>
                        {% endif %}
                    </div>
                </div>
                <!-- Botões de navegação -->
                <div class="d-flex justify-content-between mt-4">
                    <button
                        type="button"
                        class="btn btn-outline-danger btn-sml"
                        id="cadastroPrevBtn"
                        onclick="cadastroChangeStep(-1)"
                        style="display: none;"
                    >
                        <i class="fas fa-arrow-left me-2"></i>
                        Anterior
                    </button>
                    <!-- Adicione a classe btn-small apenas na segunda seção -->
                    <button
                        type="button"
                        class="btn btn-register"
                        id="cadastroNextBtn"
                        onclick="cadastroChangeStep(1)"
                    >
                        Próximo
                        <i class="fas fa-arrow-right ms-2"></i>
                    </button>
                    <button
                        type="submit"
                        class="btn btn-register btn-small"
                        id="cadastroSubmitBtn"
                        style="display: none;"
                    >
                        <i class="fas fa-user-plus me-2"></i>
                        Cadastrar
                    </button>
                </div>
            </form>
        </div>
        <!-- Exemplo de estrutura para cadastro multi-etapas -->
        <script src="/static/js/publico/publico_cadastrar_doador.js"></script>
        <!-- Toast system (manager + automatic handler) -->
        <script src="/static/js/toast-manager.js"></script>
        {% include 'components/toast-handler.html' %}
    </div>
    <!-- Bootstrap JS (optional, for interactive components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
