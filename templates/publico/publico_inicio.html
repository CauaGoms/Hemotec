{% extends "publico/publico__base.html" %}

{% block custom_css %}
<link href="/static/css/publico/publico_inicio.css" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css">
{% endblock %}

{% block corpo %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Bem-vindo ao Sistema Hemotec</h1>
            <p class="hero-subtitle">Transformando doações em esperança, conectando vidas através do sangue</p>
            <a href="/login">
                <button class="btn btn-primary btn-login">Fazer Login</button>
            </a>
            <a href="/adquirir_assinatura">
                <button class="btn btn-primary btn-assinatura">Adquirir Assinatura</button>
            </a>
        </div>
    </div>
</section>
<section class="container">
    <div class="text-center mb-5">
        <h2 class="section-title">Campanhas Recentes</h2>
    </div>
    <div class="row">
        {% if campanhas %}
            {% for campanha in campanhas %}
            <div class="col-md-4">
                <div class="card">
                    <img src="{{campanha.foto}}" class="card-img-top" alt="{{ campanha.titulo }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ campanha.titulo }}</h5>
                        <p class="card-text">{{ campanha.descricao[:120] }}{% if campanha.descricao|length > 120 %}...{% endif %}</p>
                    </div>
                    <div class="card-footer">
                        <small class="text-muted">
                            {% if campanha.data_inicio and campanha.data_fim %}
                                {{ campanha.data_inicio.strftime('%d/%m/%Y') }} - {{ campanha.data_fim.strftime('%d/%m/%Y') }}
                            {% elif campanha.data_inicio %}
                                Início: {{ campanha.data_inicio.strftime('%d/%m/%Y') }}
                            {% endif %}
                        </small>
                        <a href="/campanha" class="btn btn-outline-danger float-end">Saiba mais</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% endif %}
    </div>
</section>
<section class="quote-section">
    <div class="container text-center">
        <p class="quote-text">Doar sangue não é só um ato de solidariedade, é um compromisso com a vida. Cada gota doada é uma chance de recomeço para alguém.</p>
        <p class="quote-author">— Campanha Nacional de Doação de Sangue</p>
    </div>
</section>
<section class="container my-5">
    <!-- ...existing code (informações + estoque) ... -->
    <div class="row">
        <!-- Blocos mantidos sem alteração estrutural -->
        <div class="col-lg-12 mb-4">
            <!-- Informações Importantes (original) -->
            <!-- ...existing code... -->
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h3 class="card-title text-danger mb-3">
                        <i class="fas fa-info-circle me-2"></i>
                        Informações Importantes
                    </h3>
                    <div class="row">
                        <!-- ...existing info items... -->
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-clock text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Atenção</h6>
                                    <p class="text-muted mb-0">
                                        Durma pelo menos 6 horas
                                        <br>
                                        na noite anterior à doação.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-user-check text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Requisitos Básicos</h6>
                                    <p class="text-muted mb-0">
                                        Idade: 16 a 69 anos
                                        <br>
                                        Peso mínimo: 50kg
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-calendar-alt text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Intervalo entre Doações</h6>
                                    <p class="text-muted mb-0">
                                        Homens: 60 dias
                                        <br>
                                        Mulheres: 90 dias
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex align-items-start">
                                <i class="fas fa-id-card text-danger me-3 mt-1"></i>
                                <div>
                                    <h6 class="mb-1">Documentos Necessários</h6>
                                    <p class="text-muted mb-0">
                                        RG, CPF ou CNH
                                        <br>
                                        Em boas condições
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Estoque Atual (original) -->
        <div class="col-md-12 mb-4">
            <div class="card p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="section-title mb-0">
                        Estoque de Sangue -
                        <span id="nome-unidade-estoque" class="text-danger ms-2"></span>
                    </h5>
                    <div class="legend">
                        <span class="badge bg-adequate me-2">Adequado</span>
                        <span class="badge bg-moderate me-2">Moderado</span>
                        <span class="badge bg-low me-2">Baixo</span>
                        <span class="badge bg-critical">Crítico</span>
                    </div>
                </div>
                <div class="blood-stock-modern">
                    <div id="estoque-atual" class="row"></div>
                </div>
            </div>
        </div>
        <!-- Modal de Compatibilidade -->
        <div
            class="modal fade"
            id="compatModal"
            tabindex="-1"
            aria-labelledby="compatModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog modal-dialog-centered" style="max-width: 370px; height: 200px;">
                <div class="modal-content" style="border-radius: 22px; box-shadow: 0 8px 32px rgba(224,32,32,0.15); border: none;">
                    <div class="modal-header" style="background: linear-gradient(90deg, #e02020 0%, #ff4040 100%); border-radius: 22px 22px 0 0;">
                        <h5 class="modal-title text-white fw-bold" id="compatModalLabel">Compatibilidade Sanguínea</h5>
                        <button
                            type="button"
                            class="btn-close btn-close-white"
                            data-bs-dismiss="modal"
                            aria-label="Fechar"
                        ></button>
                    </div>
                    <div class="modal-body" id="compatModalBody" style="font-size: 1.1rem; color: #333; padding: 2rem 1.5rem; background: #fff; border-radius: 0 0 22px 22px;">
                        <!-- Conteúdo JS --></div>
                    <div class="modal-footer" style="background: #fff; border-radius: 0 0 22px 22px; border-top: none;">
                        <button
                            type="button"
                            class="btn btn-danger"
                            style="border-radius: 50px; padding: 0.6rem 2.2rem; font-weight: 600; font-size: 1.1rem; box-shadow: 0 2px 8px rgba(224,32,32,0.08);"
                            data-bs-dismiss="modal"
                        >Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Mapa Section (atualizado) -->
    <section class="container mb-5">
        <div class="text-center mb-4">
            <h2 class="section-title">Unidades de Coleta</h2>
        </div>
        <div class="map-tools">
            <button id="btn-locate" type="button">Minha Localização</button>
            <button id="btn-clear-route" type="button" disabled>Limpar Rota</button>
            <span class="geo-status" id="geo-status"></span>
        </div>
        <div id="mapa"></div>
        <div id="info-rota" class="info-box"></div>
        <ul id="lista-unidades" class="unidade-list"></ul>
    </section>
    {% endblock %}

{% block custom_js %}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <script src="/static/js/publico/publico_inicio.js"></script>
    {% endblock %}
